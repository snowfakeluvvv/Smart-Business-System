<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <title>Smart Business System | POS</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://unpkg.com/html5-qrcode"></script>
</head>
<body>

<!-- LOGIN -->
<div id="loginBox" class="box">
    <h2>Smart Business System</h2>
    <p>‡∏ß‡∏¥‡∏ó‡∏¢‡∏≤‡∏•‡∏±‡∏¢‡πÄ‡∏ó‡∏Ñ‡πÇ‡∏ô‡πÇ‡∏•‡∏¢‡∏µ‡∏™‡∏≤‡∏¢‡∏°‡∏¥‡∏ï‡∏£</p>
    <input id="username" placeholder="Username">
    <input id="password" type="password" placeholder="Password">
    <button onclick="login()">‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö</button>
    <p id="loginMsg"></p>
</div>

<!-- SYSTEM -->
<div id="system" class="hidden">

<!-- HEADER -->
<header class="topbar">
    <div></div>

    <div class="title">
        ‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏ò‡∏∏‡∏£‡∏Å‡∏¥‡∏à‡∏≠‡∏≠‡∏ô‡πÑ‡∏•‡∏ô‡πå<br>
        <small>‡∏ß‡∏¥‡∏ó‡∏¢‡∏≤‡∏•‡∏±‡∏¢‡πÄ‡∏ó‡∏Ñ‡πÇ‡∏ô‡πÇ‡∏•‡∏¢‡∏µ‡∏™‡∏≤‡∏¢‡∏°‡∏¥‡∏ï‡∏£</small>
    </div>

    <div class="right">
        <button class="logout-btn" onclick="logout()">Logout</button>
    </div>
</header>

<!-- MENU -->
<section class="main-menu">
    <button onclick="showSection('dashboardSec')">üìä Dashboard</button>
    <button onclick="showSection('productSec')">üì¶ ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</button>
    <button onclick="showSection('posSec')">üßæ POS ‡∏Ç‡∏≤‡∏¢‡∏´‡∏ô‡πâ‡∏≤‡∏£‡πâ‡∏≤‡∏ô</button>
    <button onclick="showSection('historySec')">üìú ‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡∏Ç‡∏≤‡∏¢</button>
</section>

<!-- DASHBOARD -->
<section id="dashboardSec">
    <div class="dashboard">
        <div class="card">‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ <span id="productCount">0</span></div>
        <div class="card">‡∏¢‡∏≠‡∏î‡∏Ç‡∏≤‡∏¢‡∏£‡∏ß‡∏° <span id="totalRevenue">0</span> ‡∏ö‡∏≤‡∏ó</div>
    </div>
</section>

<!-- PRODUCT -->
<section id="productSec" class="hidden">
    <h3>‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</h3>
    <input id="pname" placeholder="‡∏ä‡∏∑‡πà‡∏≠‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤" oninput="checkAddProductForm()">
    <input id="pprice" type="number" placeholder="‡∏£‡∏≤‡∏Ñ‡∏≤" oninput="checkAddProductForm()">
    <input id="pstock" type="number" placeholder="‡∏à‡∏≥‡∏ô‡∏ß‡∏ô" oninput="checkAddProductForm()">
    <button id="addBtn" onclick="addProduct()" disabled>‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</button>

    <h3 style="margin-top:20px;">‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</h3>
    <table>
        <thead>
            <tr>
                <th>‡∏•‡∏≥‡∏î‡∏±‡∏ö</th>
                <th>‡∏ä‡∏∑‡πà‡∏≠</th>
                <th>‡∏£‡∏≤‡∏Ñ‡∏≤</th>
                <th>‡∏Ñ‡∏á‡πÄ‡∏´‡∏•‡∏∑‡∏≠</th>
                <th>‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£</th>
            </tr>
        </thead>
        <tbody id="productList"></tbody>
    </table>
    <div id="productPagination" class="pagination"></div>
</section>

<!-- POS -->
<section id="posSec" class="hidden">
    <h2 style="text-align:center;">üßæ ‡∏£‡∏∞‡∏ö‡∏ö‡∏Ç‡∏≤‡∏¢‡∏´‡∏ô‡πâ‡∏≤‡∏£‡πâ‡∏≤‡∏ô (POS)</h2>

    <div style="display:grid;grid-template-columns:2fr 1fr;gap:20px;">

        <!-- PRODUCT GRID -->
            <h3>‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</h3>

            <div class="scanner-box">
                <button class="scan-btn" onclick="openScanner()">
                    üì∑ ‡∏™‡πÅ‡∏Å‡∏ô‡∏ö‡∏≤‡∏£‡πå‡πÇ‡∏Ñ‡πâ‡∏î
                </button>
            </div>

            <div id="posProducts" class="pos-grid"></div>

        <!-- CART -->
        <div class="pos-cart">
            <h3>‡∏ï‡∏∞‡∏Å‡∏£‡πâ‡∏≤‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</h3>
            <div id="cartList"></div>

            <hr>
            <h2>‡∏£‡∏ß‡∏°: <span id="posTotal">0</span> ‡∏ö‡∏≤‡∏ó</h2>

            <button class="btn-sell" onclick="confirmOrder()">‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠</button>

            <p id="change"></p>
        </div>
    </div>
</section>

<!-- HISTORY -->
<section id="historySec" class="hidden">
    <h3>‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡∏Ç‡∏≤‡∏¢</h3>
    <button onclick="exportExcel()">üìÅ Export Excel</button>

    <table>
        <thead>
            <tr>
                <th>‡πÄ‡∏ß‡∏•‡∏≤</th>
                <th>‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</th>
                <th>‡∏£‡∏≤‡∏Ñ‡∏≤</th>
                <th>‡∏à‡∏≥‡∏ô‡∏ß‡∏ô</th>
                <th>‡∏£‡∏ß‡∏°</th>
            </tr>
        </thead>
        <tbody id="historyList"></tbody>
    </table>

    <div id="historyPagination" class="pagination"></div>
</section>

</div>

<script src="script.js"></script>

<script>
function showSection(id) {
    const sections = [
        "dashboardSec",
        "productSec",
        "posSec",
        "historySec"
    ];

    sections.forEach(sec => {
        const el = document.getElementById(sec);
        if (el) el.classList.add("hidden");
    });

    const target = document.getElementById(id);
    if (target) target.classList.remove("hidden");

    // ‡∏ñ‡πâ‡∏≤‡πÄ‡∏Ç‡πâ‡∏≤ POS ‡πÉ‡∏´‡πâ‡πÇ‡∏´‡∏•‡∏î‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤
    if (id === "posSec" && typeof openPOS === "function") {
        openPOS();
    }
}
</script>

<!-- PAYMENT MODAL -->
<div id="paymentModal" class="modal hidden">
    <div class="modal-box">
        <h2>üí∞ ‡∏£‡∏±‡∏ö‡πÄ‡∏á‡∏¥‡∏ô‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤</h2>

        <p>‡∏¢‡∏≠‡∏î‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏ä‡∏≥‡∏£‡∏∞</p>
        <h1><span id="payTotal">0</span> ‡∏ö‡∏≤‡∏ó</h1>

        <input id="payCash" type="number" placeholder="‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡∏à‡πà‡∏≤‡∏¢‡∏°‡∏≤">

        <div style="margin-top:15px;">
            <button class="btn-sell" onclick="confirmPayment()">‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô</button>
            <button onclick="closePayment()">‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å</button>
        </div>

        <p id="payChange"></p>
    </div>
</div>

<!-- CHANGE MODAL -->
<div id="changeModal" class="modal hidden">
    <div class="modal-box">
        <h2>üíµ ‡πÄ‡∏á‡∏¥‡∏ô‡∏ó‡∏≠‡∏ô‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤</h2>

        <h1 id="finalChange" style="color:#ff9800;">0 ‡∏ö‡∏≤‡∏ó</h1>

        <button class="btn-sell" onclick="finishTransaction()">
            ‚úÖ ‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏ó‡∏≠‡∏ô‡πÄ‡∏á‡∏¥‡∏ô‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à
        </button>
    </div>
</div>

<!-- SCANNER MODAL -->
<div id="scannerModal" class="modal hidden">
    <div class="modal-box">
        <h2>üì∑ ‡∏™‡πÅ‡∏Å‡∏ô‡∏ö‡∏≤‡∏£‡πå‡πÇ‡∏Ñ‡πâ‡∏î</h2>
        <div id="reader" style="width:100%"></div>
        
        <div style="margin-top:15px;">
            <button onclick="simulateScan()">‡∏à‡∏≥‡∏•‡∏≠‡∏á‡∏™‡πÅ‡∏Å‡∏ô</button>
            <button onclick="closeScanner()">‡∏õ‡∏¥‡∏î</button>
        </div>
    </div>
</div>


</body>
</html>

